---
layout:     post
title:      "Nginx服务器搭建"
subtitle:   " 快速搭建Nginx服务器"
date:       2017-12-5 14:00:00
author:     "yang"
header-img: "img/post-bg-2015.jpg"
tags:
    - nginx
---

# 一、正向代理与反向代理
关于正向代理与反向代理一个最直接的解释就是：
### 正向代理隐藏真实客户端，反向代理隐藏真实服务端。
## 1.  正向代理
我们常说的代理也就是只正向代理，正向代理的过程，它隐藏了真实的请求客户端，服务端不知道真实的客户端是谁，客户端请求的服务都被代理服务器代替来请求，某些科学上网工具扮演的就是典型的正向代理角色。用浏览器访问 google 时，被残忍的block，于是你可以在国外搭建一台代理服务器，让代理帮我去请求google.com，代理把请求返回的相应结构再返回给我。
![这里写图片描述](http://img.blog.csdn.net/20171025111324529?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjE3Njg0ODM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

## 2.反向代理
反向代理隐藏了真实的服务端，当我们请求 ww.baidu.com 的时候，背后可能有成千上万台服务器为我们服务，但具体是哪一台，你不知道，也不需要知道，你只需要知道反向代理服务器是谁就好了，ww.baidu.com 就是我们的反向代理服务器，反向代理服务器会帮我们把请求转发到真实的服务器那里去。Nginx就是性能非常好的反向代理服务器，用来做负载均衡。
![这里写图片描述](http://img.blog.csdn.net/20171025111350711?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjE3Njg0ODM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
## 两者的比较
### 正向代理隐藏真实客户端，反向代理隐藏真实服务端。
![这里写图片描述](http://img.blog.csdn.net/20171025111550784?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjE3Njg0ODM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)


# 二、nginx 的配置
## 常用三个命令
```
start nginx
nginx -s reload        #修改配置后载入新的配置
nginx -s stop
```

## 1.单域名映射到多服务
配置nginx-1.12.2\conf\nginx.conf
```
    server {
        listen       80;
        server_name  www.demo.com;
		location /sewage/ {
            proxy_pass http://192.168.0.66:32322/;
        }
		location /sewageserver/ {
            proxy_pass http://192.168.0.66:32321/;
        } 
		location /abc/ {
            proxy_pass http://192.168.0.66:9004/;
        }
		location / {
            proxy_pass http://192.168.0.66:9000/;
        } 		
    }
```
如此
访问www.demo.com 将被映射到http://192.168.0.66:9000/。
访问www.demo.com/sewage/将被映射到http://192.168.0.66:32322/
。。。
## 2.多域名映射到多服务

```
	server {
        listen       80;
        server_name  pro.letv.com;

        location / {
            proxy_pass http://192.168.0.66:9000/;
        }     
    }
    server {
        listen       80;
        server_name  vid.atm.youku.com;

        location / {
            proxy_pass http://192.168.0.66:9999/;
        }     
    }
```
